# Лабораторная работа 7: *Графы*

**Цель работы:** реализовать алгоритмы обработки графовых структур: поиск различных путей, проверку связности, построение остовых деревьев минимальной стоимости.

## Задание (Вариант 12)

Задана система двусторонних дорог. Найти множество городов, расстояние от которых до выделенного города ( столицы ) больше, чем Т.

## Используемые структуры

### Матрица смежности

```cpp
struct MatrixGraph
{
    int size;                                       // Количество вершин
    vector< vector<int> > ways;                     // Матрица

    MatrixGraph(ifstream &in);                      // Конструктор считывания из файла
    void print(string file);                        // Вывод на экран
    vector<int> find_ways_to_capital(int capital);  // Поиск кротчайших путей
};
```

### Односвязный список

```cpp
struct List
{
    int name;                                       // Номер вершины
    int way;                                        // Длина грани
    List *next;                                     // Следующий элемент

    List();                                         // Конструктор
    void push(List *list, int name, int way);       // Добавление жлемента в конец
    void free(List *list);                          // Очистка памяти
};
```

### Списки смежности

```cpp
struct ListGraph
{
    int size;                                       // Количество вершин
    vector<List*> ways;                             // Списки

    ListGraph(ifstream &in);                        // Конструктор считывания из файла
    void print();                                   // Вывод
    vector<int> find_ways_to_capital(int capital);  // Поиск кротчайших путей
    void free();                                    // Очистка памяти
};
```

## Тесты

### Негативные тесты

1. Некорректный файл

	```
	Выберите один из файлов:
	1.in	2.in	3.in
	>a
	Некорректный файл!
	```

2. Матрица в файле не симметрична

	```
	Выберите один из файлов:
	1.in	2.in	3.in
	>3.in
	Таблица не симметрична!
	```

3. Некорректный ввод

	```
	...
	Выберите вершину, которая будет столицей
	>d
	>sdsd
	>dsf
	>ssd
	>f
	>1
	...
	```

### Позитивные тесты

1. Корректный файл

	```
	Выберите один из файлов:
	1.in	2.in	3.in
	>1.in
	
	    1   2   3   4   5   6
	1   0   2   5   1   0   0
	2   2   0   1   0   0   0
	3   5   1   0   3   8   0
	4   1   0   3   0   0   0
	5   0   0   8   0   0   1
	6   0   0   0   0   1   0
	
	1 -> 2 -> 3 -> 4
	2 -> 1 -> 3
	3 -> 1 -> 2 -> 4 -> 5
	4 -> 1 -> 3
	5 -> 3 -> 6
	6 -> 5
	
	Выберите вершину, которая будет столицей
	>3
	
	Введите расстояние от столицы
	>4
	
	Длина пути из столицы до каждого из городов (матрица)
	3 1 0 3 8 9
	
	Время поиска путей в матрице: 11
	
	Длина пути из столицы до каждого из городов (списки)
	3 1 0 3 8 9
	
	Время поиска путей в списках: 5
	
	Города, расстояние до столицы которых больше, чем T
	5 6
	```

## Сравнение реализаций

### Время

|Количество элементов|Матрица смежности|Списки смежности|Эффективность|
|---|---|---|---|
|10|10|4|60%|
|100|370|254|45%|
|500|7383|3941|87%|
|1000|28512|16241|75%|

### Память

|Количество элементов|Матрица смежности|Списки смежности|Эффективность|
|---|---|---|---|
|10|400|480|16%|
|100|40000|48000|16%|
|500|1000000|1200000|16%|
|1000|4000000|4800000|16%|

## Контрольные вопросы

1. **Что такое граф?**<br>Это конечное множество вершин и ребер, соединяющих их<br><br>
2. **Как представляются графы в памяти?**<br>С помощью матрицы смежности, в которой в [i, j] клетке хранится ребро от i-й к j-й вершинам. И с помощью списков смежности, где в массиве хранятся все вершины и списки путей от i-й вершины ко всем, к которым есть ребро,  в списке на i-й позиции в массиве списков.<br><br>
3. **Какие операции возможны над графами?**<br>Поиск кратчайшего пути от одной вершины к другой (если он есть), поиск кратчайшего пути от одной вершины ко всем другим, поиск кратчайших путей между всеми вершинами, поиск эйлерова пути (если он есть), поиск гамильтонова пути (если он есть).<br><br>
4. **Какие способы обхода графов существуют?**<br>*Поиск в глубину* (начиная с произвольной вершины, ищется ближайшая смежная и для нее применятеся поиск в глубину) и *поиск в ширину* (просматриваются все соседи вершины).<br><br>
5. **Где используются графовые структуры?**<br>В базах данных.<br><br>
6. **Какие пути в графе Вы знаете?**<br>*Кротчайший путь* (кротчайший путь между двумя вершинами), *эйлеров путь* (путь, проходящий по всем рёбрам графа и притом только по одному разу), *гамильтонов путь*(замкнутый цикл, проходящий по всем вершинам по одному разу)<br><br>
7. **Что такое каркасы графа?**<br>Это подграф, который содержит все вершины графи и является деревом.<br><br>

## Вывод

Представлять граф эффективней по времени с помощью списков смежности, чем с помощью матрицы смежности, поскольку она не хранит в себе нулевые ребра. По памяти у матриц смежности есть небольшой выйгрыш.